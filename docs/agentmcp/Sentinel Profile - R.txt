Project Sentinel: R Language ProfileVersion: 3.0.0-EnterpriseModule: 37-Lang-RMaps to: examples/r/Scope: Active enforcement of Reproducible Research (renv), Tidyverse style guidelines, Shiny security, and Quarto/RMarkdown execution safety.1. The R Environment Adapter (renv)R dependency management is notoriously fragile ("It works on my machine"). Sentinel enforces strict project isolation using renv.1.1 The Library LockRule: No global libraries.Enforcement:Sentinel detects renv.lock.If missing, Sentinel runs renv::init() automatically.Interceptor: Usage of install.packages("pkg") inside .R scripts is BLOCKED.Correct Flow: Agent must use the Sentinel tool add_r_package(name="dplyr"), which executes renv::install("dplyr") and immediately updates the lockfile.1.2 Snapshot IntegrityRule: Lockfile must match library.Enforcement:Before any git_commit, Sentinel executes renv::status().If the status is not "synchronized", Sentinel rejects the commit.Message: "Library/Lockfile mismatch. Run renv::snapshot() to record your changes."2. Static Analysis (lintr)Sentinel enforces the Tidyverse Style Guide to prevent unreadable "spaghetti code."2.1 Style EnforcementMechanism: Sentinel runs lintr::lint() on the buffer.Checks:Assignment: Enforces <- over = for assignment.Complexity: Flags deeply nested if/else blocks (Cyclomatic Complexity).Line Length: 80 characters.Auto-Fix: Sentinel runs styler::style_file() on save.2.2 Global State HygieneRule: Do not change global options or working directory.Enforcement:Sentinel scans for setwd(), options(), or par().Action: BLOCKED.Message: "Side-Effect Violation: setwd() is forbidden. Use here::here() for relative paths."3. RMarkdown & Quarto SafetyAgents often generate reports (.qmd, .Rmd). This allows arbitrary code execution during rendering.3.1 The "Chunk" GuardThreat: Infinite loops or massive memory usage during render.Enforcement:Sentinel parses the chunk headers ````{r ...}`.Injection: It automatically injects error=FALSE and a timeout parameter into the knitr options.If an Agent tries to render a chunk that downloads a 5GB dataset, Sentinel kills the process.3.2 Shiny App SecurityThreat: Reactive injection (Server-side execution of Client input).Enforcement:Sentinel scans server.R / app.R.Check: Usage of renderUI with un-sanitized input.Pattern: HTML(paste(input$text)) without htmltools::htmlEscape.Action: CRITICAL BLOCK.Message: "XSS Risk: Raw HTML generation from input detected. Use htmlEscape()."4. Troubleshooting R Agents4.1 Common Failure Modes"Package not available (for R version x.y.z)":Sentinel Fix: Sentinel checks CRAN/Bioconductor status. If the package is archived, it prompts the Agent to use devtools::install_version() to pin a specific older version compatible with the lockfile."Object not found": Agent assumes an object exists from a previous chunk execution.Sentinel Fix: Sentinel enforces "Restart and Run All" semantics. It warns the Agent that the environment is transient and persistent state must be saved to disk (saveRDS).